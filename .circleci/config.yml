version: 2.1

orbs:
  win: circleci/windows@4.1 # The Windows orb give you everything you need to start using the Windows executor.

jobs:
  build:
    executor:
      name: win/default # executor type
      size: "medium" # resource class, can be "medium", "large", "xlarge", "2xlarge", defaults to "medium" if not specified
    #machine: 
      #image: ubuntu-2004:202201-01
    steps:
      - checkout # check out the code in the project directory
      - run: 
          name: "Install Chocolatey"
          command: Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
      - run:
          name: "Install dotnet 6"
          command: choco install dotnet-6.0-sdk
      - run: 
          name: "Default Cake Job"
          command: ./build.bat

version: 2.1

#orbs:
 # win: circleci/windows@4.1 # The Windows orb give you everything you need to start using the Windows executor.

jobs:
  build:
    #executor:
    #  name: win/default # executor type
    #  size: "medium" # resource class, can be "medium", "large", "xlarge", "2xlarge", defaults to "medium" if not specified
    machine: 
      image: ubuntu-2004:202201-01
    steps:
      - checkout # check out the code in the project directory
      - run:
          name: Pre-Install tasks
          command: wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb && sudo dpkg -i packages-microsoft-prod.deb          
      - run:
          name: Install dotnet-skd-6.0
          command: sudo apt-get update && sudo apt-get install -y apt-transport-https && sudo apt-get update && sudo apt-get install -y dotnet-sdk-6.0          
      - run: 
          name: "Install dotnet 3.1"
          command: sudo apt-get install -y dotnet-sdk-3.1
      - run: 
          name: "Default Cake Job"
          command: ./build.sh
